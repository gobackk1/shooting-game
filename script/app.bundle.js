/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./script/src/app.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./script/src/app.js":
/*!***************************!*\
  !*** ./script/src/app.js ***!
  \***************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_class_Canvas2DUtility__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/class/Canvas2DUtility */ \"./script/src/modules/class/Canvas2DUtility.js\");\n/* harmony import */ var _modules_class_Viper__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./modules/class/Viper */ \"./script/src/modules/class/Viper.js\");\n/* harmony import */ var _modules_class_Shot__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./modules/class/Shot */ \"./script/src/modules/class/Shot.js\");\n/* harmony import */ var _modules_class_Enemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./modules/class/Enemy */ \"./script/src/modules/class/Enemy.js\");\n/* harmony import */ var _modules_class_Explosion__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./modules/class/Explosion */ \"./script/src/modules/class/Explosion.js\");\n/* harmony import */ var _modules_class_SceneManager__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./modules/class/SceneManager */ \"./script/src/modules/class/SceneManager.js\");\n/* harmony import */ var _modules_class_Sound__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./modules/class/Sound */ \"./script/src/modules/class/Sound.js\");\n/* harmony import */ var _modules_class_BackgroundStar__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./modules/class/BackgroundStar */ \"./script/src/modules/class/BackgroundStar.js\");\n/* harmony import */ var _modules_class_Homing__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./modules/class/Homing */ \"./script/src/modules/class/Homing.js\");\n/* harmony import */ var _modules_class_Boss__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./modules/class/Boss */ \"./script/src/modules/class/Boss.js\");\n/* harmony import */ var _modules_state__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./modules/state */ \"./script/src/modules/state.js\");\n/* harmony import */ var _modules_util__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./modules/util */ \"./script/src/modules/util.js\");\n\n\n\n\n\n\n\n\n\n\n\n\nwindow.AudioContext = window.AudioContext || window.webkitAudioContext;\nwindow.AudioBufferSourceNode = window.AudioBufferSourceNode || window.webkitAudioBufferSourceNode;\nconsole.log(AudioBufferSourceNode);\nconst CANVAS_WIDTH = 600;\nconst CANVAS_HEIGHT = 700;\nconst SHOT_MAX_COUNT = 10;\nconst ENEMY_SMALL_MAX_COUNT = 20;\nconst ENEMY_LARGE_MAX_COUNT = 5;\nconst ENEMY_SHOT_MAX_COUNT = 50;\nconst HOMING_MAX_COUNT = 50;\nconst EXPLOSION_MAX_COUNT = 10;\nconst BACKGROUND_STAR_MAX_COUNT = 100;\nconst BACKGROUND_STAR_MAX_SIZE = 3;\nconst BACKGROUND_STAR_MAX_SPEED = 4;\nlet util = null; // Canvas2DUtility\n\nlet canvas = null;\nlet ctx = null;\nlet startTime = null; // ゲーム開始タイムスタンプ\n\nlet shotArray = []; // ショットのインスタンスを格納\n\nlet singleShotArray = []; // シングルショットのインスタンスを格納\n\nlet enemyArray = []; // 敵キャラクタのインスタンスを格納\n\nlet enemyShotArray = []; // 敵のショットを格納\n\nlet explosionArray = []; // 爆発のインスタンスを格納\n\nlet backgroundStarArray = []; // 星のインスタンスを格納\n\nlet homingArray = [];\nlet viper = null; // 自機キャラクターのインスタンス\n\nlet scene = null; // シーンマネージャー\n\nlet sound = null;\nlet boss = null;\nlet restart = false; // 再スタートするためのフラグ\n\nlet bgmLoaded = false; // bgmの読み込みが完了しているか\n\nwindow.addEventListener('load', () => {\n  util = new _modules_class_Canvas2DUtility__WEBPACK_IMPORTED_MODULE_0__[\"default\"](document.querySelector('#canvas'));\n  canvas = util.canvas;\n  ctx = util.context;\n  canvas.width = CANVAS_WIDTH;\n  canvas.height = CANVAS_HEIGHT;\n  let startButton = document.querySelector('#btn-start');\n  let bgmButton = document.querySelector('#btn-bgm');\n  let bgm = document.querySelector('#bgm'); // このコードはsafariで動かない\n  // startButton.addEventListener('click', async () => {\n  // \tstartButton.disabled = true;\n  // \tsound = new Sound();\n  // \t// await sound.load('https://kksample.sakura.ne.jp/shooting/sound/small_explosion1.mp3');\n  // \tawait sound.load('https://kksample.sakura.ne.jp/shooting/sound/small_explosion1.mp3');\n  // \tinitialize();\n  // \tloadCheck();\n  // });\n\n  startButton.addEventListener('click', () => {\n    startButton.disabled = true;\n    sound = new _modules_class_Sound__WEBPACK_IMPORTED_MODULE_6__[\"default\"]();\n    sound.load('https://kksample.sakura.ne.jp/shooting/sound/small_explosion1.mp3', error => {\n      if (error != null) {\n        alert('ファイルの読み込みエラーです');\n        return;\n      }\n\n      initialize();\n      loadCheck();\n    });\n  });\n  bgmButton.addEventListener('click', () => {\n    if (!bgmLoaded) {\n      bgm.addEventListener('canplaythrough', function fn() {\n        bgm.play();\n        bgmButton.disabled = false;\n        bgmButton.value = 'BGMを停止する';\n        bgmLoaded = true;\n        bgm.removeEventListener('canplaythrough', fn);\n      });\n      bgm.src = bgm.dataset.src;\n      bgmButton.disabled = true;\n      bgmButton.value = 'BGM読み込み中';\n    } else {\n      if (bgm.paused) {\n        bgm.play();\n        bgmButton.value = 'BGMを停止する';\n      } else {\n        bgm.pause();\n        bgmButton.value = 'BGMを再生する';\n      }\n    }\n  });\n});\n\nfunction initialize() {\n  let i;\n  viper = new _modules_class_Viper__WEBPACK_IMPORTED_MODULE_1__[\"default\"](ctx, 0, 0, 64, 64, 'https://kksample.sakura.ne.jp/shooting/image/viper_2.png');\n  viper.setComing(CANVAS_WIDTH / 2, CANVAS_HEIGHT, CANVAS_WIDTH / 2, CANVAS_HEIGHT - 100);\n  scene = new _modules_class_SceneManager__WEBPACK_IMPORTED_MODULE_5__[\"default\"]();\n\n  for (i = 0; i < EXPLOSION_MAX_COUNT; i++) {\n    explosionArray[i] = new _modules_class_Explosion__WEBPACK_IMPORTED_MODULE_4__[\"default\"](ctx, 100, 15, 40, 1);\n    explosionArray[i].setSound(sound);\n  }\n\n  for (i = 0; i < SHOT_MAX_COUNT; i++) {\n    shotArray[i] = new _modules_class_Shot__WEBPACK_IMPORTED_MODULE_2__[\"default\"](ctx, 0, 0, 32, 32, 'https://kksample.sakura.ne.jp/shooting/image/viper_shot_normal_2.png');\n    shotArray[i].setSpeed(8.5);\n    singleShotArray[i * 2] = new _modules_class_Shot__WEBPACK_IMPORTED_MODULE_2__[\"default\"](ctx, 0, 0, 32, 32, 'https://kksample.sakura.ne.jp/shooting/image/viper_shot_normal_2.png');\n    singleShotArray[i * 2].setSpeed(8);\n    singleShotArray[i * 2 + 1] = new _modules_class_Shot__WEBPACK_IMPORTED_MODULE_2__[\"default\"](ctx, 0, 0, 32, 32, 'https://kksample.sakura.ne.jp/shooting/image/viper_shot_normal_2.png');\n    singleShotArray[i * 2 + 1].setSpeed(8);\n  }\n\n  for (i = 0; i < ENEMY_SHOT_MAX_COUNT; i++) {\n    enemyShotArray[i] = new _modules_class_Shot__WEBPACK_IMPORTED_MODULE_2__[\"default\"](ctx, 0, 0, 24, 24, 'https://kksample.sakura.ne.jp/shooting/image/enemy_shot_1.png');\n    enemyShotArray[i].setTargetArray([viper]);\n    enemyShotArray[i].setExplosionArray(explosionArray);\n  }\n\n  for (i = 0; i < HOMING_MAX_COUNT; i++) {\n    homingArray[i] = new _modules_class_Homing__WEBPACK_IMPORTED_MODULE_8__[\"default\"](ctx, 0, 0, 32, 32, 'https://kksample.sakura.ne.jp/shooting/image/enemy_homing_shot.png');\n    homingArray[i].setTargetArray([viper]);\n    homingArray[i].setExplosionArray(explosionArray);\n  }\n\n  boss = new _modules_class_Boss__WEBPACK_IMPORTED_MODULE_9__[\"default\"](ctx, 0, 0, 128, 128, 'https://kksample.sakura.ne.jp/shooting/image/boss_1.png');\n  boss.setShotArray(enemyShotArray);\n  boss.setHomingArray(homingArray);\n  boss.setAttackTarget(viper);\n\n  for (i = 0; i < ENEMY_SMALL_MAX_COUNT; i++) {\n    enemyArray[i] = new _modules_class_Enemy__WEBPACK_IMPORTED_MODULE_3__[\"default\"](ctx, 0, 0, 48, 48, 'https://kksample.sakura.ne.jp/shooting/image/enemy_small_1.png');\n    enemyArray[i].setShotArray(enemyShotArray);\n    enemyArray[i].setAttackTarget(viper);\n  }\n\n  for (i = 0; i < ENEMY_LARGE_MAX_COUNT; i++) {\n    enemyArray[ENEMY_SMALL_MAX_COUNT + i] = new _modules_class_Enemy__WEBPACK_IMPORTED_MODULE_3__[\"default\"](ctx, 0, 0, 64, 64, 'https://kksample.sakura.ne.jp/shooting/image/enemy_large_1.png');\n    enemyArray[ENEMY_SMALL_MAX_COUNT + i].setShotArray(enemyShotArray);\n    enemyArray[ENEMY_SMALL_MAX_COUNT + i].setAttackTarget(viper);\n  }\n\n  let concatEnemyArray = enemyArray.concat([boss]);\n\n  for (i = 0; i < SHOT_MAX_COUNT; i++) {\n    shotArray[i].setTargetArray(concatEnemyArray);\n    singleShotArray[i * 2].setTargetArray(concatEnemyArray);\n    singleShotArray[i * 2 + 1].setTargetArray(concatEnemyArray);\n    shotArray[i].setExplosionArray(explosionArray);\n    singleShotArray[i * 2].setExplosionArray(explosionArray);\n    singleShotArray[i * 2 + 1].setExplosionArray(explosionArray);\n  }\n\n  for (i = 0; i < BACKGROUND_STAR_MAX_COUNT; i++) {\n    let size = 1 + Math.random() * (BACKGROUND_STAR_MAX_SIZE - 1);\n    let speed = 1 + Math.random() * (BACKGROUND_STAR_MAX_SPEED - 1);\n    backgroundStarArray[i] = new _modules_class_BackgroundStar__WEBPACK_IMPORTED_MODULE_7__[\"default\"](ctx, size, speed);\n    let x = Math.random() * CANVAS_WIDTH;\n    let y = Math.random() * CANVAS_HEIGHT;\n    backgroundStarArray[i].set(x, y);\n  }\n\n  viper.setShotArray(shotArray, singleShotArray);\n}\n\nfunction loadCheck() {\n  // 各画像が読み込み完了しているかチェック\n  let ready = true;\n  ready = ready && viper.ready;\n  ready = ready && boss.ready;\n  shotArray.map(v => ready = ready && v.ready);\n  singleShotArray.map(v => ready = ready && v.ready);\n  enemyArray.map(v => ready = ready && v.ready);\n  enemyShotArray.map(v => ready = ready && v.ready);\n\n  if (ready === true) {\n    eventSetting();\n    sceneSetting();\n    startTime = Date.now();\n    render();\n  } else {\n    setTimeout(loadCheck, 100);\n  }\n}\n\nfunction render() {\n  ctx.globalAlpha = 1.0;\n  util.drawRect(0, 0, canvas.width, canvas.height, '#111122');\n  ctx.font = 'bold 24px monospace';\n  util.drawText(Object(_modules_util__WEBPACK_IMPORTED_MODULE_11__[\"zeroPadding\"])(_modules_state__WEBPACK_IMPORTED_MODULE_10__[\"default\"].gameScore, 5), 30, 50, '#ffffff');\n  let nowTime = (Date.now() - startTime) / 1000;\n  scene.update();\n  viper.update();\n  boss.update();\n  shotArray.map(v => v.update());\n  singleShotArray.map(v => v.update());\n  enemyArray.map(v => v.update());\n  enemyShotArray.map(v => v.update());\n  explosionArray.map(v => v.update());\n  backgroundStarArray.map(v => v.update());\n  homingArray.map(v => v.update());\n  requestAnimationFrame(render);\n}\n\nfunction eventSetting() {\n  window.addEventListener('keydown', event => {\n    _modules_state__WEBPACK_IMPORTED_MODULE_10__[\"default\"].isKeyDown[`key_${event.key}`] = true;\n\n    if (event.key === 'Enter') {\n      if (viper.life <= 0) {\n        restart = true;\n      }\n    }\n  });\n  window.addEventListener('keyup', event => {\n    _modules_state__WEBPACK_IMPORTED_MODULE_10__[\"default\"].isKeyDown[`key_${event.key}`] = false;\n  });\n}\n\nfunction sceneSetting() {\n  scene.add('intro', time => {\n    if (time > 2.0) {\n      scene.use('invade_boss');\n    }\n  });\n  scene.add('invade_default_type', time => {\n    if (scene.frame % 30 === 0) {\n      for (let i = 0; i < ENEMY_SMALL_MAX_COUNT; i++) {\n        if (enemyArray[i].life <= 0) {\n          let e = enemyArray[i];\n\n          if (scene.frame % 60 === 0) {\n            e.set(-e.width, 30, 2, 'default');\n            e.setVectorFromAngle(Object(_modules_util__WEBPACK_IMPORTED_MODULE_11__[\"degToRad\"])(30));\n          } else {\n            e.set(CANVAS_WIDTH + e.width, 30, 2, 'default');\n            e.setVectorFromAngle(Object(_modules_util__WEBPACK_IMPORTED_MODULE_11__[\"degToRad\"])(150));\n          }\n\n          break;\n        }\n      }\n    }\n\n    if (scene.frame === 270) {\n      scene.use('blank');\n    }\n\n    if (viper.life <= 0) {\n      scene.use('gameover');\n    }\n  });\n  scene.add('blank', time => {\n    if (scene.frame === 150) {\n      scene.use('invade_wave_move_type');\n    }\n\n    if (viper.life <= 0) {\n      scene.use('gameover');\n    }\n  });\n  scene.add('invade_wave_move_type', time => {\n    if (scene.frame % 50 === 0) {\n      for (let i = 0; i < ENEMY_SMALL_MAX_COUNT; i++) {\n        if (enemyArray[i].life <= 0) {\n          let e = enemyArray[i];\n          let range = 0.1 + Math.random() * 0.8;\n          e.set(CANVAS_WIDTH * range, -e.height, 2, 'wave'); // if (scene.frame <= 200) {\n          // \te.set(CANVAS_WIDTH * 0.2, -e.height, 2, 'wave');\n          // } else {\n          // \te.set(CANVAS_WIDTH * 0.8, -e.height, 2, 'wave');\n          // }\n\n          break;\n        }\n      }\n    }\n\n    if (scene.frame === 450) {\n      scene.use('invade_large_type');\n    }\n\n    if (viper.life <= 0) {\n      scene.use('gameover');\n    }\n  });\n  scene.add('invade_large_type', time => {\n    if (scene.frame === 100) {\n      let i = ENEMY_SMALL_MAX_COUNT + ENEMY_LARGE_MAX_COUNT;\n\n      for (let j = ENEMY_SMALL_MAX_COUNT; j < i; j++) {\n        if (enemyArray[j].life <= 0) {\n          let e = enemyArray[j];\n          e.set(CANVAS_WIDTH / 3, -e.height, 40, 'large');\n          break;\n        }\n      }\n    }\n\n    if (scene.frame === 200) {\n      let i = ENEMY_SMALL_MAX_COUNT + ENEMY_LARGE_MAX_COUNT;\n\n      for (let j = ENEMY_SMALL_MAX_COUNT; j < i; j++) {\n        if (enemyArray[j].life <= 0) {\n          let e = enemyArray[j];\n          e.set(CANVAS_WIDTH / 1.5, -e.height, 40, 'large');\n          break;\n        }\n      }\n    }\n\n    if (scene.frame === 800) {\n      scene.use('invade_boss');\n    }\n\n    if (viper.life <= 0) {\n      scene.use('gameover');\n    }\n  });\n  scene.add('invade_boss', time => {\n    if (scene.frame === 0) {\n      boss.set(CANVAS_WIDTH / 2, -boss.height, 250);\n      boss.setMode('invade');\n    }\n\n    if (viper.life <= 0) {\n      scene.use('gameover');\n      boss.setMode('escape');\n    }\n\n    if (boss.life <= 0) {\n      scene.use('intro');\n    }\n  });\n  scene.add('gameover', time => {\n    let textWidth = CANVAS_WIDTH / 2;\n    let loopWidth = textWidth + CANVAS_WIDTH; // 割った余りを利用することで、リピートできるように\n\n    let x = CANVAS_WIDTH - scene.frame * 2 % loopWidth;\n    ctx.font = 'bold 72px sans-serif';\n    util.drawText('GAME OVER', x, CANVAS_HEIGHT / 2, '#ff0000', textWidth);\n\n    if (restart === true) {\n      restart = false;\n      _modules_state__WEBPACK_IMPORTED_MODULE_10__[\"default\"].gameScore = 0;\n      viper.setComing(CANVAS_WIDTH / 2, CANVAS_HEIGHT + 50, CANVAS_WIDTH / 2, CANVAS_HEIGHT - 100);\n      scene.use('intro');\n    }\n  });\n  scene.use('intro');\n}\n\n//# sourceURL=webpack:///./script/src/app.js?");

/***/ }),

/***/ "./script/src/modules/class/BackgroundStar.js":
/*!****************************************************!*\
  !*** ./script/src/modules/class/BackgroundStar.js ***!
  \****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return BackgroundStar; });\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n\nclass BackgroundStar {\n  constructor(ctx, size, speed, color = '#ffffff') {\n    this.ctx = ctx;\n    this.color = color;\n    this.pos = null; // 星の大きさ\n\n    this.size = size; // 星の移動速度\n\n    this.speed = speed;\n  }\n\n  set(x, y) {\n    this.pos = new _Position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y);\n  }\n\n  update() {\n    this.ctx.fillStyle = this.color;\n    this.pos.y += this.speed;\n    this.ctx.fillRect(this.pos.x - this.size / 2, this.pos.y - this.size / 2, this.size, this.size); // 画面下部を超えたら上へ戻す\n\n    if (this.pos.y + this.size > this.ctx.canvas.height) {\n      this.pos.y = -this.size;\n    }\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/BackgroundStar.js?");

/***/ }),

/***/ "./script/src/modules/class/Boss.js":
/*!******************************************!*\
  !*** ./script/src/modules/class/Boss.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Boss; });\n/* harmony import */ var _Character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Character */ \"./script/src/modules/class/Character.js\");\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ \"./script/src/modules/util.js\");\n\n\n\nclass Boss extends _Character__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(ctx, x, y, w, h, imagePath) {\n    super(ctx, x, y, w, h, 0, imagePath);\n    this.speed = 3;\n    this.shotArray = null;\n    this.homingArray = null;\n    this.attackTarget = null; // 自身のモード\n\n    this.mode = ''; // 自身が出現してからのフレーム\n\n    this.frame = 0;\n  }\n\n  set(x, y, life = 1) {\n    this.pos.set(x, y);\n    this.life = life;\n    this.frame = 0;\n  }\n\n  setSpeed(speed) {\n    this.speed = speed;\n  }\n\n  setMode(mode) {\n    this.mode = mode;\n  }\n\n  setShotArray(shotArray) {\n    this.shotArray = shotArray;\n  }\n\n  setHomingArray(homingArray) {\n    this.homingArray = homingArray;\n  }\n\n  setAttackTarget(target) {\n    this.attackTarget = target;\n  }\n\n  fire(x = 0.0, y = 1.0, speed = 5.0) {\n    for (let i = 0; i < this.shotArray.length; i++) {\n      if (this.shotArray[i].life <= 0) {\n        this.shotArray[i].set(this.pos.x, this.pos.y);\n        this.shotArray[i].setSpeed(speed);\n        this.shotArray[i].setVector(x, y);\n        break;\n      }\n    }\n  }\n\n  homingFire(x = 0.0, y = 1.0, speed = 3.0) {\n    for (let i = 0; i < this.homingArray.length; i++) {\n      if (this.homingArray[i].life <= 0) {\n        this.homingArray[i].set(this.pos.x, this.pos.y);\n        this.homingArray[i].setSpeed(speed);\n        this.homingArray[i].setVector(x, y);\n        break;\n      }\n    }\n  }\n\n  update() {\n    if (this.life <= 0) {\n      return;\n    }\n\n    switch (this.mode) {\n      case 'invade':\n        this.pos.y += this.speed;\n\n        if (this.pos.y > 100) {\n          this.pos.y = 100;\n          this.mode = 'floating';\n          this.frame = 0;\n        }\n\n        break;\n\n      case 'escape':\n        this.pos.y -= this.speed;\n\n        if (this.pos.y < -this.height) {\n          this.life = 0;\n        }\n\n        break;\n\n      case 'floating':\n        if (this.frame % 1000 < 500) {\n          if (this.frame % 200 > 140 && this.frame % 8 === 0) {\n            let tx = this.attackTarget.pos.x - this.pos.x;\n            let ty = this.attackTarget.pos.y - this.pos.y;\n            let tv = _Position__WEBPACK_IMPORTED_MODULE_1__[\"default\"].calcNormal(tx, ty);\n            this.fire(tv.x, tv.y, 4.7);\n            this.fire(tv.x - 0.15, tv.y, 4.0);\n            this.fire(tv.x + 0.15, tv.y, 4.0);\n          }\n        } else {\n          if (this.frame % 70 === 0) {\n            let tx = this.attackTarget.pos.x - this.pos.x;\n            let ty = this.attackTarget.pos.y - this.pos.y;\n            let tv = _Position__WEBPACK_IMPORTED_MODULE_1__[\"default\"].calcNormal(tx, ty);\n            this.homingFire(tv.x, tv.y, 3);\n          }\n        }\n\n        this.pos.x += Math.cos(this.frame / 100) * 2.0;\n        break;\n\n      default:\n        break;\n    }\n\n    this.draw();\n    ++this.frame;\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Boss.js?");

/***/ }),

/***/ "./script/src/modules/class/Canvas2DUtility.js":
/*!*****************************************************!*\
  !*** ./script/src/modules/class/Canvas2DUtility.js ***!
  \*****************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Canvas2dUtility; });\nclass Canvas2dUtility {\n  constructor(canvas) {\n    this.canvasElement = canvas;\n    this.ctx = canvas.getContext(\"2d\");\n  }\n\n  get canvas() {\n    return this.canvasElement;\n  }\n\n  get context() {\n    return this.ctx;\n  }\n\n  drawRect(x, y, width, height, color) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.fillRect(x, y, width, height);\n  }\n\n  drawLine(x1, y1, x2, y2, color, width = 1) {\n    if (color != null) {\n      this.ctx.strokeStyle = color;\n    }\n\n    this.ctx.lineLength = width;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.lineTo(x2, y2);\n    this.ctx.closePath();\n    this.ctx.stroke();\n  }\n\n  drawPolygon(points, color) {\n    if (Array.isArray(points) !== true || points.length < 6) {\n      return;\n    }\n\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.beginPath();\n    this.ctx.moveTo(points[0], points[1]);\n\n    for (let i = 2; i < points.length; i += 2) {\n      this.ctx.lineTo(points[i], points[i + 1]);\n    }\n\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  drawCircle(x, y, radius, color) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.beginPath();\n    this.ctx.arc(x, y, radius, 0.0, Math.PI * 2);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  drawFan(x, y, radius, startRadian, endRadian, color) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.beginPath();\n    this.ctx.moveTo(x, y);\n    this.ctx.arc(x, y, radius, startRadian, endRadian);\n    this.ctx.closePath();\n    this.ctx.fill();\n  }\n\n  drawQuadraticBezier(x1, y1, x2, y2, cx, cy, color, width = 1) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.lineLength = width;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.quadraticCurveTo(cx, cy, x2, y2);\n    this.ctx.closePath();\n    this.ctx.stroke();\n  }\n\n  drawCubicBezier(x1, y1, x2, y2, cx1, cy1, cx2, cy2, color, width = 1) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.lineLength = width;\n    this.ctx.beginPath();\n    this.ctx.moveTo(x1, y1);\n    this.ctx.bezierCurveTo(cx1, cy1, cx2, cy2, x2, y2);\n    this.ctx.closePath();\n    this.ctx.stroke();\n  }\n\n  drawText(text, x, y, color, width) {\n    if (color != null) {\n      this.ctx.fillStyle = color;\n    }\n\n    this.ctx.fillText(text, x, y, width);\n  }\n\n  imageLoader(path) {\n    return new Promise(resolve => {\n      let target = new Image();\n      target.addEventListener('load', () => {\n        resolve(target);\n      });\n      target.src = path;\n    });\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Canvas2DUtility.js?");

/***/ }),

/***/ "./script/src/modules/class/Character.js":
/*!***********************************************!*\
  !*** ./script/src/modules/class/Character.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Character; });\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n\nclass Character {\n  constructor(ctx, x, y, w, h, life, imagePath) {\n    this.ctx = ctx;\n    this.pos = new _Position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y);\n    this.width = w;\n    this.height = h; // 生存状態\n\n    this.life = life; // インスタンスに適用する画像\n\n    this.image = new Image();\n    this.image.addEventListener('load', () => {\n      this.ready = true;\n    });\n    this.image.src = imagePath; // 画像の読み込みが完了したか\n\n    this.ready = false; // 進行方向\n\n    this.vector = new _Position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](0.0, -1.0); // 描画する画像の向き\n\n    this.angle = 270 * Math.PI / 180;\n  }\n\n  setVector(x, y) {\n    this.vector.set(x, y);\n  }\n\n  setVectorFromAngle(angle) {\n    this.angle = angle;\n    let sin = Math.sin(angle);\n    let cos = Math.cos(angle);\n    this.vector.set(cos, sin);\n  }\n\n  rotationDraw() {\n    this.ctx.save();\n    this.ctx.translate(this.pos.x, this.pos.y); // 上方向(270)が基準点のため\n\n    this.ctx.rotate(this.angle - Math.PI * 1.5);\n    let offsetX = this.width / 2;\n    let offsetY = this.height / 2;\n    this.ctx.drawImage(this.image, -offsetX, -offsetY, this.width, this.height);\n    this.ctx.restore();\n  }\n\n  draw() {\n    let offsetX = this.width / 2;\n    let offsetY = this.height / 2;\n    this.ctx.drawImage(this.image, this.pos.x - offsetX, this.pos.y - offsetY, this.width, this.height);\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Character.js?");

/***/ }),

/***/ "./script/src/modules/class/Enemy.js":
/*!*******************************************!*\
  !*** ./script/src/modules/class/Enemy.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Enemy; });\n/* harmony import */ var _Character__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Character */ \"./script/src/modules/class/Character.js\");\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../util */ \"./script/src/modules/util.js\");\n\n\n\nclass Enemy extends _Character__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(ctx, x, y, w, h, imagePath) {\n    super(ctx, x, y, w, h, 0, imagePath);\n    this.speed = 3;\n    this.shotArray = null;\n    this.type = 'default';\n    this.frame = 0; // 自身が登場してからのフレーム\n\n    this.attackTarget = null;\n  }\n\n  set(x, y, life = 1, type = 'default') {\n    this.pos.set(x, y);\n    this.life = life;\n    this.type = type;\n    this.frame = 0;\n  }\n\n  setShotArray(shotArray) {\n    this.shotArray = shotArray;\n  }\n\n  setAttackTarget(target) {\n    this.attackTarget = target;\n  }\n\n  fire(x = 0.0, y = 1.0, speed = 5.0) {\n    for (let i = 0; i < this.shotArray.length; i++) {\n      if (this.shotArray[i].life <= 0) {\n        this.shotArray[i].set(this.pos.x, this.pos.y);\n        this.shotArray[i].setSpeed(speed);\n        this.shotArray[i].setVector(x, y);\n        break;\n      }\n    }\n  }\n\n  update() {\n    if (this.life <= 0) {\n      return;\n    }\n\n    switch (this.type) {\n      case 'wave':\n        if (this.frame % 60 === 0) {\n          let tx = this.attackTarget.pos.x - this.pos.x;\n          let ty = this.attackTarget.pos.y - this.pos.y;\n          let tv = _Position__WEBPACK_IMPORTED_MODULE_1__[\"default\"].calcNormal(tx, ty);\n          this.fire(tv.x, tv.y, 4.0);\n        }\n\n        this.pos.x += Math.sin(this.frame / 10);\n        this.pos.y += 2.0;\n\n        if (this.pos.y - this.height > this.ctx.canvas.height) {\n          this.life = 0;\n        }\n\n        break;\n\n      case 'large':\n        if (this.frame % 50 === 0) {\n          for (let i = 0; i < 360; i += 45) {\n            let r = i * Math.PI / 180;\n            let sin = Math.sin(r);\n            let cos = Math.cos(r);\n            this.fire(cos, sin, 2.5);\n          }\n        }\n\n        this.pos.x += Math.sin((this.frame + 90) / 50) * 2.0;\n        this.pos.y += 1.0;\n\n        if (this.pos.y - this.height > this.ctx.canvas.height) {\n          this.life = 0;\n        }\n\n        break;\n\n      case 'default':\n      default:\n        if (this.frame === 50) {\n          this.fire();\n        }\n\n        this.pos.x += this.vector.x * this.speed;\n        this.pos.y += this.vector.y * this.speed;\n\n        if (this.pos.y - this.height > this.ctx.canvas.height) {\n          this.life = 0;\n        }\n\n        break;\n    }\n\n    this.draw();\n    ++this.frame;\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Enemy.js?");

/***/ }),

/***/ "./script/src/modules/class/Explosion.js":
/*!***********************************************!*\
  !*** ./script/src/modules/class/Explosion.js ***!
  \***********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Explosion; });\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n/* harmony import */ var _util__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../util */ \"./script/src/modules/util.js\");\n\n\nclass Explosion {\n  constructor(ctx, radius, count, size, timeRange, color = '#ff1166') {\n    this.ctx = ctx;\n    this.life = false;\n    this.color = color;\n    this.sound = null; // 爆発の座標\n\n    this.pos = null; // 爆発の半径\n\n    this.radius = radius; // 生成する火花の数\n\n    this.count = count; // 爆発開始のタイムスタンプ\n\n    this.startTime = 0; // 爆発が消えるまでの時間\n\n    this.timeRange = timeRange; // 火花の大きさ\n\n    this.fireBaseSize = size; // 火花の1つあたりの大きさを格納\n\n    this.fireSize = []; // 火花の位置を格納\n\n    this.firePos = []; // 火花の進行方向\n\n    this.fireVector = [];\n  }\n\n  set(x, y) {\n    for (let i = 0; i < this.count; i++) {\n      this.firePos[i] = new _Position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](x, y);\n      let vr = Math.random() * Math.PI * 2;\n      let sin = Math.sin(vr);\n      let cos = Math.cos(vr);\n      let mr = Math.random();\n      this.fireVector[i] = new _Position__WEBPACK_IMPORTED_MODULE_0__[\"default\"](cos * mr, sin * mr); // fireBaseSize の 0.5 ~ 1.0 倍のランダムな大きさを格納\n\n      this.fireSize[i] = (Math.random() * 0.5 + 0.5) * this.fireBaseSize;\n    }\n\n    this.life = true;\n    this.startTime = Date.now();\n\n    if (this.sound != null) {\n      this.sound.play();\n    }\n  }\n\n  setSound(sound) {\n    this.sound = sound;\n  }\n\n  update() {\n    if (this.life !== true) {\n      return;\n    }\n\n    this.ctx.fillStyle = this.color;\n    this.ctx.globalAlpha = 0.5;\n    let time = (Date.now() - this.startTime) / 1000;\n    let ease = Object(_util__WEBPACK_IMPORTED_MODULE_1__[\"simpleEaseIn\"])(1.0 - Math.min(time / this.timeRange, 1.0));\n    let progress = 1.0 - ease;\n\n    for (let i = 0; i < this.firePos.length; i++) {\n      // 火花が広がる距離\n      let d = this.radius * progress;\n      let x = this.firePos[i].x + this.fireVector[i].x * d;\n      let y = this.firePos[i].y + this.fireVector[i].y * d;\n      let s = 1.0 - progress;\n      this.ctx.fillRect(x - this.fireSize[i] * s / 2, y - this.fireSize[i] * s / 2, this.fireSize[i] * s, this.fireSize[i] * s);\n    }\n\n    this.ctx.globalAlpha = 1.0; // 爆発終了\n\n    if (progress >= 1.0) {\n      this.life = false;\n    }\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Explosion.js?");

/***/ }),

/***/ "./script/src/modules/class/Homing.js":
/*!********************************************!*\
  !*** ./script/src/modules/class/Homing.js ***!
  \********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Homing; });\n/* harmony import */ var _Shot__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Shot */ \"./script/src/modules/class/Shot.js\");\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n/* harmony import */ var _Viper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Viper */ \"./script/src/modules/class/Viper.js\");\n/* harmony import */ var _Enemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Enemy */ \"./script/src/modules/class/Enemy.js\");\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../state */ \"./script/src/modules/state.js\");\n\n\n\n\n\nclass Homing extends _Shot__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\n  constructor(ctx, x, y, w, h, imagePath) {\n    super(ctx, x, y, w, h, imagePath);\n    this.frame = 0;\n  }\n\n  set(x, y, speed, power) {\n    this.pos.set(x, y);\n    this.life = 1;\n    this.setSpeed(speed);\n    this.setPower(power);\n    this.frame = 0;\n  }\n\n  update() {\n    if (this.life <= 0) {\n      return;\n    }\n\n    if (this.pos.x + this.width < 0 || this.pos.x - this.width > this.ctx.canvas.width || this.pos.y + this.height < 0 || this.pos.y - this.height > this.ctx.canvas.height) {\n      this.life = 0;\n    }\n\n    let target = this.targetArray[0];\n\n    if (this.frame < 300) {\n      let vector = new _Position__WEBPACK_IMPORTED_MODULE_1__[\"default\"](target.pos.x - this.pos.x, target.pos.y - this.pos.y);\n      let normalizedVector = vector.normalize();\n      this.vector = this.vector.normalize();\n      let cross = this.vector.cross(normalizedVector);\n      let rad = Math.PI / 120;\n\n      if (cross > 0.0) {\n        this.vector.rotate(rad);\n      } else if (cross < 0.0) {\n        this.vector.rotate(-rad);\n      }\n    }\n\n    this.pos.x += this.vector.x * this.speed;\n    this.pos.y += this.vector.y * this.speed;\n    this.angle = Math.atan2(this.vector.y, this.vector.x);\n    this.targetArray.map(v => {\n      if (this.life <= 0 || v.life <= 0) {\n        return;\n      }\n\n      let distance = this.pos.distance(v.pos);\n\n      if (distance <= (this.width + v.width) / 4) {\n        if (v instanceof _Viper__WEBPACK_IMPORTED_MODULE_2__[\"default\"] === true && v.isComing === true) {\n          return;\n        }\n\n        v.life -= this.power;\n\n        if (v.life <= 0) {\n          for (let i = 0; i < this.explosionArray.length; i++) {\n            if (this.explosionArray[i].life !== true) {\n              this.explosionArray[i].set(v.pos.x, v.pos.y);\n              break;\n            }\n          }\n\n          if (v instanceof _Enemy__WEBPACK_IMPORTED_MODULE_3__[\"default\"] === true) {\n            let score = 100;\n\n            if (v.type === 'large') {\n              score = 1000;\n            }\n\n            _state__WEBPACK_IMPORTED_MODULE_4__[\"default\"].gameScore = Math.min(_state__WEBPACK_IMPORTED_MODULE_4__[\"default\"].gameScore + score, 99999);\n          }\n        }\n\n        this.life = 0;\n      }\n    });\n    this.rotationDraw();\n    ++this.frame;\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Homing.js?");

/***/ }),

/***/ "./script/src/modules/class/Position.js":
/*!**********************************************!*\
  !*** ./script/src/modules/class/Position.js ***!
  \**********************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Position; });\nclass Position {\n  constructor(x, y) {\n    this.x = null;\n    this.y = null;\n    this.set(x, y);\n  }\n\n  set(x, y) {\n    if (x != null) {\n      this.x = x;\n    }\n\n    if (y != null) {\n      this.y = y;\n    }\n  }\n\n  distance(target) {\n    let x = this.x - target.x;\n    let y = this.y - target.y;\n    return Math.sqrt(x * x + y * y);\n  } // 対象のクラストの外積を求める\n\n\n  cross(target) {\n    return this.x * target.y - this.y * target.x;\n  }\n\n  normalize() {\n    let l = Math.sqrt(this.x * this.x + this.y * this.y);\n\n    if (l === 0) {\n      return new Position(0, 0);\n    }\n\n    let x = this.x / l;\n    let y = this.y / l;\n    return new Position(x, y);\n  }\n\n  rotate(rad) {\n    let sin = Math.sin(rad);\n    let cos = Math.cos(rad);\n    this.x = this.x * cos + this.y * -sin;\n    this.y = this.x * sin + this.y * cos;\n  } // ベクトル(x,y)からベクトルの長さを求める\n\n\n  static calcLength(x, y) {\n    return Math.sqrt(x * x + y * y);\n  } // ベクトル(x,y)を単位ベクトルを求める\n\n\n  static calcNormal(x, y) {\n    let len = Position.calcLength(x, y);\n    return new Position(x / len, y / len);\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Position.js?");

/***/ }),

/***/ "./script/src/modules/class/SceneManager.js":
/*!**************************************************!*\
  !*** ./script/src/modules/class/SceneManager.js ***!
  \**************************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return SceneManager; });\nclass SceneManager {\n  constructor() {\n    this.scene = {};\n    this.activeScene = null;\n    this.startTime = null; // 現在のシーンがアクティブになってからのフレーム\n\n    this.frame = null;\n  }\n\n  add(name, updateFunction) {\n    this.scene[name] = updateFunction;\n  }\n\n  use(name) {\n    if (this.scene.hasOwnProperty(name) !== true) {\n      return;\n    }\n\n    this.activeScene = this.scene[name];\n    this.startTime = Date.now();\n    this.frame = -1; // シーン変更後のフレームが、0から始まるように\n  }\n\n  update() {\n    let activeTime = (Date.now() - this.startTime) / 1000; // 経過時間を引数に与えて、updateFunctionを呼び出す\n\n    this.activeScene(activeTime);\n    ++this.frame;\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/SceneManager.js?");

/***/ }),

/***/ "./script/src/modules/class/Shot.js":
/*!******************************************!*\
  !*** ./script/src/modules/class/Shot.js ***!
  \******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Shot; });\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../state */ \"./script/src/modules/state.js\");\n/* harmony import */ var _Character__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Character */ \"./script/src/modules/class/Character.js\");\n/* harmony import */ var _Viper__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Viper */ \"./script/src/modules/class/Viper.js\");\n/* harmony import */ var _Enemy__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Enemy */ \"./script/src/modules/class/Enemy.js\");\n/* harmony import */ var _Boss__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Boss */ \"./script/src/modules/class/Boss.js\");\n\n\n\n\n\nclass Shot extends _Character__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(ctx, x, y, w, h, imagePath) {\n    super(ctx, x, y, w, h, 0, imagePath); // ショットが進むスピード\n\n    this.speed = 7; // ショットのダメージ\n\n    this.power = 1; // 自身と衝突判定する対象\n\n    this.targetArray = []; // 爆発インスタンスを格納\n\n    this.explosionArray = [];\n  }\n\n  set(x, y, speed, power) {\n    this.pos.set(x, y);\n    this.life = 1;\n    this.setSpeed(speed);\n    this.setPower(power);\n  }\n\n  setSpeed(speed) {\n    if (speed != null && speed > 0) {\n      this.speed = speed;\n    }\n  }\n\n  setPower(power) {\n    if (power != null && power > 0) {\n      this.power = power;\n    }\n  }\n\n  setTargetArray(targetArray) {\n    if (Array.isArray(targetArray) && targetArray != null && targetArray.length > 0) {\n      this.targetArray = targetArray;\n    }\n  }\n\n  setExplosionArray(explosionArray) {\n    if (Array.isArray(explosionArray) && explosionArray != null && explosionArray.length > 0) {\n      this.explosionArray = explosionArray;\n    }\n  }\n\n  update() {\n    if (this.life <= 0) {\n      return;\n    }\n\n    if (this.pos.y + this.height < 0 || this.pos.y - this.height > this.ctx.canvas.height || this.pos.x + this.width < 0 || this.pos.x - this.width > this.ctx.canvas.width) {\n      this.life = 0;\n    }\n\n    this.pos.x += this.vector.x * this.speed;\n    this.pos.y += this.vector.y * this.speed; // 衝突判定\n\n    this.targetArray.map(v => {\n      if (this.life <= 0 || v.life <= 0) {\n        return;\n      }\n\n      let distance = this.pos.distance(v.pos);\n\n      if (distance <= (this.width + v.width) / 4) {\n        // 自機キャラクターの場合、搭乗中は無敵\n        if (v instanceof _Viper__WEBPACK_IMPORTED_MODULE_2__[\"default\"] === true && v.isComing === true) {\n          return;\n        }\n\n        v.life -= this.power;\n\n        if (v.life <= 0) {\n          for (let i = 0; i < this.explosionArray.length; i++) {\n            if (this.explosionArray[i].life !== true) {\n              this.explosionArray[i].set(v.pos.x, v.pos.y);\n              break;\n            }\n          }\n\n          if (v instanceof _Enemy__WEBPACK_IMPORTED_MODULE_3__[\"default\"] === true) {\n            let score = 100;\n\n            if (v.type === 'large') {\n              score = 1000;\n            }\n\n            _state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gameScore = Math.min(_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gameScore + score, 99999);\n          } else if (v instanceof _Boss__WEBPACK_IMPORTED_MODULE_4__[\"default\"] === true) {\n            _state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gameScore = Math.min(_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].gameScore + 15000, 99999);\n          }\n        }\n\n        this.life = 0;\n      }\n    });\n    this.rotationDraw();\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Shot.js?");

/***/ }),

/***/ "./script/src/modules/class/Sound.js":
/*!*******************************************!*\
  !*** ./script/src/modules/class/Sound.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Sound; });\nclass Sound {\n  constructor() {\n    this.ctx = new AudioContext();\n    this.source = null;\n  } // このコードはクロスブラウザ対応できていない\n  // async load(audioPath) {\n  // \t// オーディオファイルをロードする\n  // \tlet res = await fetch(audioPath);\n  // \t// ロード完了したレスポンスから、AudioBuffer生成のためのデータを取り出す\n  // \tlet buffer = await res.arrayBuffer();\n  // \t// AudioBuffer生成\n  // \tlet decodeAudio = await this.ctx.decodeAudioData(buffer);\n  // \tif (decodeAudio != null) {\n  // \t\t// 再利用するために、変数に保持\n  // \t\tthis.source = decodeAudio;\n  // \t\treturn;\n  // \t} else {\n  // \t\tthrow new Error('sound読み込みエラー');\n  // \t}\n  // }\n\n\n  load(audioPath, callback) {\n    fetch(audioPath).then(response => {\n      return response.arrayBuffer();\n    }).then(buffer => {\n      return this.ctx.decodeAudioData(buffer);\n    }).then(decodeAudio => {\n      this.source = decodeAudio;\n      callback();\n    }).catch(() => {\n      callback('error!');\n    });\n  }\n\n  play() {\n    let node = new AudioBufferSourceNode(this.ctx, {\n      buffer: this.source\n    });\n    node.connect(this.ctx.destination);\n    node.addEventListener('ended', () => {\n      node.stop(); // 念のためstop実行\n\n      node.disconnect(); // ノードをガベージコレクタが解放するようにnullをバインド\n\n      node = null;\n    });\n    node.start();\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Sound.js?");

/***/ }),

/***/ "./script/src/modules/class/Viper.js":
/*!*******************************************!*\
  !*** ./script/src/modules/class/Viper.js ***!
  \*******************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Viper; });\n/* harmony import */ var _state__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../state */ \"./script/src/modules/state.js\");\n/* harmony import */ var _Character__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Character */ \"./script/src/modules/class/Character.js\");\n/* harmony import */ var _Position__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Position */ \"./script/src/modules/class/Position.js\");\n\n\n\nclass Viper extends _Character__WEBPACK_IMPORTED_MODULE_1__[\"default\"] {\n  constructor(ctx, x, y, w, h, image) {\n    super(ctx, x, y, w, h, 1, image); // 登場中か表すフラグ\n\n    this.isComing = false; // 登場演出を開始したタイムスタンプ\n\n    this.comingStart = null; // 登場演出を開始する座標\n\n    this.comingStartPos = null; // 登場演出を完了とする座標\n\n    this.comingEndPos = null; // 自信を動かすスピード\n\n    this.speed = 4; // ショットのインスタンス配列\n\n    this.shotArray = null;\n    this.singleShotArray = null; // ショット生成間隔を調整するカウンタ\n\n    this.shotCheckCounter = 0; // ショットの間隔（フレーム）\n\n    this.shotInterval = 10;\n  }\n\n  setComing(startX, startY, endX, endY) {\n    this.isComing = true;\n    this.life = 1;\n    this.comingStart = Date.now();\n    this.pos.set(startX, startY);\n    this.comingStartPos = new _Position__WEBPACK_IMPORTED_MODULE_2__[\"default\"](startX, startY);\n    this.comingEndPos = new _Position__WEBPACK_IMPORTED_MODULE_2__[\"default\"](endX, endY);\n  }\n\n  setShotArray(shotArray, singleShotArray) {\n    this.shotArray = shotArray;\n    this.singleShotArray = singleShotArray;\n  }\n\n  update() {\n    if (this.life <= 0) {\n      return;\n    }\n\n    let justTime = Date.now();\n\n    if (this.isComing === true) {\n      let comingTime = (justTime - this.comingStart) / 1000;\n      let y = this.comingStartPos.y - comingTime * 50;\n\n      if (y <= this.comingEndPos.y) {\n        this.isComing = false;\n        y = this.comingEndPos.y;\n      }\n\n      this.pos.set(this.pos.x, y);\n\n      if (justTime % 100 < 50) {\n        this.ctx.globalAlpha = 0.5;\n      }\n    } else {\n      if (_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isKeyDown.key_ArrowLeft === true) {\n        this.pos.x -= this.speed;\n      }\n\n      if (_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isKeyDown.key_ArrowRight === true) {\n        this.pos.x += this.speed;\n      }\n\n      if (_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isKeyDown.key_ArrowUp === true) {\n        this.pos.y -= this.speed;\n      }\n\n      if (_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isKeyDown.key_ArrowDown === true) {\n        this.pos.y += this.speed;\n      } // 移動後の位置が画面外に出ていたら修正\n\n\n      let canvasWidth = this.ctx.canvas.width;\n      let canvasHeight = this.ctx.canvas.height;\n      let tx = Math.min(Math.max(this.pos.x, 0), canvasWidth);\n      let ty = Math.min(Math.max(this.pos.y, 0), canvasHeight);\n      this.pos.set(tx, ty);\n\n      if (_state__WEBPACK_IMPORTED_MODULE_0__[\"default\"].isKeyDown.key_z === true) {\n        if (this.shotCheckCounter >= 0) {\n          for (let si = 0; si < this.shotArray.length; si++) {\n            if (this.shotArray[si].life <= 0) {\n              this.shotArray[si].set(this.pos.x, this.pos.y); // this.shotArray[si].setPower(2);\n\n              this.shotCheckCounter = -this.shotInterval;\n              break;\n            }\n          }\n\n          for (let ssi = 0; ssi < this.singleShotArray.length; ssi += 2) {\n            if (this.singleShotArray[ssi].life <= 0 && this.singleShotArray[ssi + 1].life <= 0) {\n              let radCW = 265 * Math.PI / 180;\n              let radCCW = 275 * Math.PI / 180;\n              this.singleShotArray[ssi].set(this.pos.x - 20, this.pos.y);\n              this.singleShotArray[ssi].setVectorFromAngle(radCW);\n              this.singleShotArray[ssi + 1].set(this.pos.x + 20, this.pos.y);\n              this.singleShotArray[ssi + 1].setVectorFromAngle(radCCW);\n              this.shotCheckCounter = -this.shotInterval;\n              break;\n            }\n          }\n        }\n      }\n\n      ++this.shotCheckCounter;\n    }\n\n    this.draw();\n    this.ctx.globalAlpha = 1.0;\n  }\n\n}\n\n//# sourceURL=webpack:///./script/src/modules/class/Viper.js?");

/***/ }),

/***/ "./script/src/modules/state.js":
/*!*************************************!*\
  !*** ./script/src/modules/state.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n  isKeyDown: {},\n  gameScore: 0\n});\n\n//# sourceURL=webpack:///./script/src/modules/state.js?");

/***/ }),

/***/ "./script/src/modules/util.js":
/*!************************************!*\
  !*** ./script/src/modules/util.js ***!
  \************************************/
/*! exports provided: simpleEaseIn, generateRandomInt, zeroPadding, degToRad */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"simpleEaseIn\", function() { return simpleEaseIn; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"generateRandomInt\", function() { return generateRandomInt; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"zeroPadding\", function() { return zeroPadding; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"degToRad\", function() { return degToRad; });\nfunction simpleEaseIn(t) {\n  return t * t * t * t;\n}\nfunction generateRandomInt(range) {\n  let random = Math.random();\n  return Math.floor(random * range);\n}\nfunction zeroPadding(number, count) {\n  let zeroArray = new Array(count);\n  let zeroString = zeroArray.join('0') + number;\n  return zeroString.slice(-count);\n} // 度数法の角度からラジアンを求める\n\nfunction degToRad(deg) {\n  return deg * Math.PI / 180;\n}\n\n//# sourceURL=webpack:///./script/src/modules/util.js?");

/***/ })

/******/ });